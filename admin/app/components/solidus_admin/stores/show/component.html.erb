<%= page do %>
  <%= page_header do %>
    <%= page_header_back(solidus_admin.stores_path) %>
    <%= page_header_title(t(".title", store: @store&.name)) %>
  <% end %>

  <%= form_for @store, url: solidus_admin.store_path(@store), html: { id: form_id } do |f| %>
    <%= page_with_sidebar do %>
      <%= page_with_sidebar_main do %>
        <%= render component("ui/panel").new(title: t(".store_details")) do %>
        <div class="flex flex-wrap gap-4 pb-4">
          <%= render component("ui/forms/field").text_field(f, :name, required: true) %>
          <%= render component("ui/forms/field").text_field(f, :code, required: true) %>
          <%= render component("ui/forms/field").text_field(f, :seo_title) %>
          <%= render component("ui/forms/field").text_field(f, :meta_keywords) %>
          <%= render component("ui/forms/field").text_area(f, :meta_description) %>
          <%= render component("ui/forms/field").text_field(f, :tax_id) %>
          <%= render component("ui/forms/field").text_field(f, :vat_id) %>
        </div>
        <% end %>

        <%= render component("ui/panel").new(title: t(".store_contact")) do %>
          <div class="flex flex-wrap gap-4 pb-4">
            <%= render component("ui/forms/field").text_field(f, :url, required: true) %>
            <%= render component("ui/forms/field").text_field(f, :mail_from_address, required: true) %>
            <%= render component("ui/forms/field").text_field(f, :bcc_email) %>
          </div>
        <% end %>

        <%= render component("ui/panel").new(title: t(".localization")) do %>
          <div class="flex flex-wrap gap-4 pb-4">
            <%= render component("ui/forms/field").select(
              f,
              :default_currency,
              currency_options,
              include_blank: true
            ) %>
            <%= render component("ui/forms/field").select(
              f,
              :cart_tax_country_iso,
              cart_tax_country_options,
              include_blank: t(".no_cart_tax_country")
            ) %>
            <%= render component("ui/forms/field").select(
              f,
              :available_locales,
              localization_options,
              multiple: true,
              class: "select2",
              name: "store[available_locales][]"
            ) %>
          </div>
        <% end %>

        <%= render component("ui/panel").new(title: t(".description")) do %>
          <%= render component("ui/forms/field").text_area(f, :description) %>
        <% end %>

        <%= render component("ui/panel").new(title: t(".addresses")) do %>
          <div class="js-addresses-form">
          <%= render component("stores/address_form").new(
              store: @store,
            ) %>
          </div>
        <% end %>
      <% end %>
    <% end %>
  <% end %>

  <%= page_footer do %>
    <%= page_footer_actions do %>
      <div class="py-1.5 text-center">
        <%= render component("ui/button").new(tag: :button, text: t(".update"), form: form_id) %>
        <%= render component("ui/button").new(tag: :a, text: t(".cancel"), href: solidus_admin.store_path(@store), scheme: :secondary) %>
      </div>
    <% end %>
  <% end %>
<% end %>
